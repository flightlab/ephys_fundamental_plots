<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<meta property="og:title" content="5.3 Data export | Fundamental plots for electrophysiological data" />
<meta property="og:type" content="book" />

<meta property="og:description" content="<p>A walkthrough on how to produce fundamental plots from electrophysiological
data. Developed by the Alshuler Lab at the University of British Columbia.</p>" />
<meta name="github-repo" content="flightlab/ephys_fundamental_plots" />

<meta name="author" content="Vikram B. Baliga" />

<meta name="date" content="2023-02-28" />


<meta name="description" content="<p>A walkthrough on how to produce fundamental plots from electrophysiological
data. Developed by the Alshuler Lab at the University of British Columbia.</p>">

<title>5.3 Data export | Fundamental plots for electrophysiological data</title>

<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="libs/bootstrap-3.3.5/css/flatly.min.css" rel="stylesheet" />
<script src="libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<style>h1 {font-size: 34px;}
       h1.title {font-size: 38px;}
       h2 {font-size: 30px;}
       h3 {font-size: 24px;}
       h4 {font-size: 18px;}
       h5 {font-size: 16px;}
       h6 {font-size: 12px;}
       code {color: inherit; background-color: rgba(0, 0, 0, 0.04);}
       pre:not([class]) { background-color: white }</style>
<script src="libs/navigation-1.1/tabsets.js"></script>


<style type="text/css">code{white-space: pre;}</style>
<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>
<style type="text/css">
  pre:not([class]) {
    background-color: white;
  }
</style>




<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
code {
  color: inherit;
  background-color: rgba(0, 0, 0, 0.04);
}
img {
  max-width:100%;
  height: auto;
}
/* show arrow before summary tag as in bootstrap
TODO: remove if boostrap in updated in html_document (rmarkdown#1485) */
details > summary {
  display: list-item;
  cursor: pointer;
}
</style>
</head>

<body>

<div class="container-fluid main-container">


<div class="row">
<div class="col-sm-12">
<div id="TOC">
<ul>
<li class="has-sub"><a href="index.html#about" id="toc-about"><span class="toc-section-number">1</span> About</a>
<ul>
<li><a href="citation.html#citation" id="toc-citation">Citation</a></li>
<li><a href="license.html#license" id="toc-license">License</a></li>
</ul></li>
<li class="has-sub"><a href="2-preface.html#preface" id="toc-preface"><span class="toc-section-number">2</span> Preface</a>
<ul>
<li><a href="2.1-r-packages-versioning.html#r-packages-versioning" id="toc-r-packages-versioning"><span class="toc-section-number">2.1</span> R packages &amp; versioning</a></li>
<li><a href="2.2-not_in.html#not_in" id="toc-not_in"><span class="toc-section-number">2.2</span> <code>%not_in%</code></a></li>
</ul></li>
<li class="has-sub"><a href="3-spike-sorting.html#spike-sorting" id="toc-spike-sorting"><span class="toc-section-number">3</span> Spike sorting</a>
<ul>
<li><a href="3.1-spike2.html#spike2" id="toc-spike2"><span class="toc-section-number">3.1</span> Spike2</a></li>
<li><a href="3.2-neuralynx.html#neuralynx" id="toc-neuralynx"><span class="toc-section-number">3.2</span> Neuralynx</a></li>
</ul></li>
<li class="has-sub"><a href="4-raw-data-and-spike-sorted-traces.html#raw-data-and-spike-sorted-traces" id="toc-raw-data-and-spike-sorted-traces"><span class="toc-section-number">4</span> Raw data and spike sorted traces</a>
<ul>
<li><a href="4.1-including-plots.html#including-plots" id="toc-including-plots"><span class="toc-section-number">4.1</span> Including Plots</a></li>
</ul></li>
<li class="has-sub"><a href="5-data-wrangling.html#data-wrangling" id="toc-data-wrangling"><span class="toc-section-number">5</span> Data wrangling</a>
<ul>
<li class="has-sub"><a href="5.1-import-example-file-and-metadata.html#import-example-file-and-metadata" id="toc-import-example-file-and-metadata"><span class="toc-section-number">5.1</span> Import example file and metadata</a>
<ul>
<li><a href="5.1-import-example-file-and-metadata.html#identify-files-to-import" id="toc-identify-files-to-import"><span class="toc-section-number">5.1.1</span> Identify files to import</a></li>
<li><a href="5.1-import-example-file-and-metadata.html#data-import-and-preliminary-labeling" id="toc-data-import-and-preliminary-labeling"><span class="toc-section-number">5.1.2</span> Data import and preliminary labeling</a></li>
</ul></li>
<li><a href="5.2-organizing-replicates-required-and-binning-optional.html#organizing-replicates-required-and-binning-optional" id="toc-organizing-replicates-required-and-binning-optional"><span class="toc-section-number">5.2</span> Organizing replicates (required) and binning (optional)</a></li>
<li><a href="5.3-data-export.html#data-export" id="toc-data-export"><span class="toc-section-number">5.3</span> Data export</a></li>
</ul></li>
<li class="has-sub"><a href="6-raster-and-mean-spike-rate-plots.html#raster-and-mean-spike-rate-plots" id="toc-raster-and-mean-spike-rate-plots"><span class="toc-section-number">6</span> Raster and mean spike rate plots</a>
<ul>
<li><a href="6.1-including-plots-1.html#including-plots-1" id="toc-including-plots-1"><span class="toc-section-number">6.1</span> Including Plots</a></li>
</ul></li>
<li class="has-sub"><a href="7-spatiotemporal-tuning.html#spatiotemporal-tuning" id="toc-spatiotemporal-tuning"><span class="toc-section-number">7</span> Spatiotemporal tuning</a>
<ul>
<li><a href="7.1-including-plots-2.html#including-plots-2" id="toc-including-plots-2"><span class="toc-section-number">7.1</span> Including Plots</a></li>
</ul></li>
<li class="has-sub"><a href="8-histological-verification.html#histological-verification" id="toc-histological-verification"><span class="toc-section-number">8</span> Histological verification</a>
<ul>
<li><a href="8.1-including-plots-3.html#including-plots-3" id="toc-including-plots-3"><span class="toc-section-number">8.1</span> Including Plots</a></li>
</ul></li>
</ul>
</div>
</div>
</div>
<div class="row">
<div class="col-sm-12">
<div id="data-export" class="section level2" number="5.3">
<h2><span class="header-section-number">5.3</span> Data export</h2>
<p>It is highly recommended that you export
<code>all_replicate_data_reorganized</code>. I generally export
<code>all_replicate_data_reorganized</code> as a separate <code>csv</code> file for each of
the following conditions:</p>
<ol style="list-style-type: decimal">
<li>Unbinned</li>
<li>Bin size = 10 ms</li>
<li>Bin size = 100 ms</li>
</ol>
<p>This section will provide code to export each of the above, assuming
you used those bin sizes in the previous section. Please be sure to
change file naming conventions and other parameters in the event you
chose a different <code>bin_size</code> in the previous section.</p>
<div class="sourceCode" id="cb28"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb28-1"><a href="5.3-data-export.html#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="do">## Declare export destination</span></span>
<span id="cb28-2"><a href="5.3-data-export.html#cb28-2" aria-hidden="true" tabindex="-1"></a>export_path <span class="ot">&lt;-</span> <span class="st">&quot;./data/&quot;</span></span>
<span id="cb28-3"><a href="5.3-data-export.html#cb28-3" aria-hidden="true" tabindex="-1"></a><span class="do">## The &quot;condition&quot; will be appended to the file name. Choose whichever one</span></span>
<span id="cb28-4"><a href="5.3-data-export.html#cb28-4" aria-hidden="true" tabindex="-1"></a><span class="do">## corresponds to the bin_size you used above</span></span>
<span id="cb28-5"><a href="5.3-data-export.html#cb28-5" aria-hidden="true" tabindex="-1"></a>condition <span class="ot">&lt;-</span>  <span class="st">&quot;_binsize10&quot;</span></span>
<span id="cb28-6"><a href="5.3-data-export.html#cb28-6" aria-hidden="true" tabindex="-1"></a><span class="co">#condition &lt;-  &quot;_binsize100&quot;</span></span>
<span id="cb28-7"><a href="5.3-data-export.html#cb28-7" aria-hidden="true" tabindex="-1"></a><span class="co">#condition &lt;-  &quot;_unbinned&quot;</span></span>
<span id="cb28-8"><a href="5.3-data-export.html#cb28-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-9"><a href="5.3-data-export.html#cb28-9" aria-hidden="true" tabindex="-1"></a><span class="do">## Export each tibble within all_replicate_data_reorganized</span></span>
<span id="cb28-10"><a href="5.3-data-export.html#cb28-10" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">length</span>(all_replicate_data_reorganized)) {</span>
<span id="cb28-11"><a href="5.3-data-export.html#cb28-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>(i)</span>
<span id="cb28-12"><a href="5.3-data-export.html#cb28-12" aria-hidden="true" tabindex="-1"></a>  dat <span class="ot">&lt;-</span></span>
<span id="cb28-13"><a href="5.3-data-export.html#cb28-13" aria-hidden="true" tabindex="-1"></a>    all_replicate_data_reorganized[[i]] <span class="sc">%&gt;%</span></span>
<span id="cb28-14"><a href="5.3-data-export.html#cb28-14" aria-hidden="true" tabindex="-1"></a>    <span class="fu">bind_rows</span>()</span>
<span id="cb28-15"><a href="5.3-data-export.html#cb28-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">write_csv</span>(</span>
<span id="cb28-16"><a href="5.3-data-export.html#cb28-16" aria-hidden="true" tabindex="-1"></a>    dat,</span>
<span id="cb28-17"><a href="5.3-data-export.html#cb28-17" aria-hidden="true" tabindex="-1"></a>    <span class="at">file =</span></span>
<span id="cb28-18"><a href="5.3-data-export.html#cb28-18" aria-hidden="true" tabindex="-1"></a>      <span class="fu">paste0</span>(</span>
<span id="cb28-19"><a href="5.3-data-export.html#cb28-19" aria-hidden="true" tabindex="-1"></a>        export_path,</span>
<span id="cb28-20"><a href="5.3-data-export.html#cb28-20" aria-hidden="true" tabindex="-1"></a>        <span class="fu">names</span>(all_replicate_data_reorganized)[i],</span>
<span id="cb28-21"><a href="5.3-data-export.html#cb28-21" aria-hidden="true" tabindex="-1"></a>        condition,</span>
<span id="cb28-22"><a href="5.3-data-export.html#cb28-22" aria-hidden="true" tabindex="-1"></a>        <span class="st">&quot;.csv&quot;</span></span>
<span id="cb28-23"><a href="5.3-data-export.html#cb28-23" aria-hidden="true" tabindex="-1"></a>      )</span>
<span id="cb28-24"><a href="5.3-data-export.html#cb28-24" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb28-25"><a href="5.3-data-export.html#cb28-25" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rm</span>(dat)</span>
<span id="cb28-26"><a href="5.3-data-export.html#cb28-26" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p>Re-run the above chunk of code per condition you seek to export</p>
<p>🐢</p>

</div>
<!-- </div> -->
<p style="text-align: center;">
<a href="5.2-organizing-replicates-required-and-binning-optional.html"><button class="btn btn-default">Previous</button></a>
<a href="6-raster-and-mean-spike-rate-plots.html"><button class="btn btn-default">Next</button></a>
</p>
</div>
</div>


</div>

<script>

// add bootstrap table styles to pandoc tables
$(document).ready(function () {
  $('tr.header').parent('thead').parent('table').addClass('table table-condensed');
});

</script>

</body>
</html>
